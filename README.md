# مكتبة ArWikiCats — نظام تعريب تلقائي لتصنيفات ويكيبيديا العربية

[![License](https://img.shields.io/badge/license-MIT-green)]()
[![Python](https://img.shields.io/badge/Python-3.10+-blue)]()
[![Status](https://img.shields.io/badge/status-Beta-orange)]()
[![Tests](https://img.shields.io/badge/tests-13900+-success)]()

---

# جدول المحتويات

- [لماذا ArWikiCats](#لماذا-ArWikiCats)
- [1. المزايا الرئيسية](#1-المزايا-الرئيسية)
- [2. داخل محرك ArWikiCats](#2-داخل-محرك-ArWikiCats)
- [3. المتطلبات والتثبيت](#3-المتطلبات-والتثبيت)
- [4. الاستخدام السريع](#4-الاستخدام-السريع)
- [5. إعدادات النظام](#5-إعدادات-النظام)
- [6. توسيع النظام](#6-توسيع-النظام)
- [7. بنية المشروع](#7-بنية-المشروع)
- [8. الاختبارات](#8-الاختبارات)
- [9. الأداء](#9-الأداء)
- [10. ملاحظات للمساهمين](#10-ملاحظات-للمساهمين)
- [11. القيود الحالية](#11-القيود-الحالية)
- [12. خارطة الطريق](#12-خارطة-الطريق)
- [13. الخلاصة](#13-الخلاصة)

---

## لماذا ArWikiCats

تعريب تصنيفات ويكيبيديا العربية يمثل تحديًا بسبب العدد الهائل من التصنيفات الإنجليزية والأنماط المتداخلة.
يهدف مشروع **ArWikiCats** إلى معالجة هذه المشكلة عبر بناء نظام قادر على:

* توحيد أسلوب الترجمة.
* معالجة التصنيفات بدقة عالية.
* تنفيذ أنماط زمنية وجغرافية ووظيفية ورياضية معقدة.
* دعم عمل البوتات ومهام الإنتاج التحريري.

---

# 1. المزايا الرئيسية

* **سرعة عالية للغاية** بعد التحسينات الأخيرة.
* **قواعد ترجمة واسعة** تغطي آلاف الأنماط (سنوات – بلدان – وظائف – رياضة – إعلام).
* **تخزين مؤقت داخلي** لتسريع الأداء في كل خطوة.
* **نظام وحدات (Bots)** قابل للتوسعة بسهولة.
* **نتائج دقيقة وموحّدة** متوافقة مع أسلوب ويكيبيديا العربية.
* **قدرة على معالجة دفعات ضخمة** تشمل آلاف أو مئات آلاف التصنيفات.

---

# 2. داخل محرك ArWikiCats

المعالجة الكاملة تمر عبر المراحل التالية:
* التصنيف الخام → التطبيع → اكتشاف الأنماط الزمنية → مطابقة القواعد والترجمات → وحدة الحل الرئيسية → تنسيق العربية → التسمية النهائية (تصنيف:)


---

## 2.1 التطبيع (Normalization)

تنظيف التصنيف قبل التحليل:

* إزالة الشرطات السفلية.
* توحيد المسافات.
* إزالة الرموز غير الضرورية.
* حذف بادئة Category:.

---

## 2.2 اكتشاف الأنماط
* التعامل مع الحالات الزمنية مثل:
    - المدى الزمني:
    - السنوات (2015 - 10BC)
    - العقود: 1550s
    - القرون: 20th century
    - الألفيات:

مثال:

```
Category:1550s establishments in Namibia → تصنيف:تأسيسات عقد 1550 في ناميبيا

````

---

## 2.3 القواعد والقواميس

يشمل ذلك:
* **[الجنسيات](ArWikiCats/translations/jsons/nationalities)**:
	- صيغ المذكر والمؤنث والجمع والمفرد واسم البلد العربي والإنجليزي.
* **[الجغرافيا](ArWikiCats/translations/jsons/geography) و[المدن](ArWikiCats/translations/jsons/cities)**:
	- المدن والدول والمناطق والأقاليم والمحافظات والبلديات والمقاطعات والتقسيمات الإدارية الأخرى.
* **[الوظائف والمهن](ArWikiCats/translations/jsons/jobs)**:
	- مختلف مسميات الوظائف والمهن والأعمال. وتصنيفها حسب الجنس (للرجال/للسيدات) يشمل ذلك الوظائف الرياضية والوظائف السينمائية والمهن العلمية.
* **[الرياضات](ArWikiCats/translations/jsons/sports)**:
    - التسميات والفرق والوظائف والألعاب الأولمبية، والتنسيقات الرياضية، وأسماء الفرق، ومراكز اللاعبين، ومصطلحات مختلف الرياضات.
* **[الأفلام والتلفزيون](ArWikiCats/translations/jsons/media)**:
	- الأفلام وأنواعها ومهن صناعة السينما، مثل صناع الأفلام والمخرجين والممثلين، وأنواع وتنسيقات التلفزيون وكافة المصطلحات المتعلقة بالأفلام والتلفزيون.
* **الجوائز والأحداث**:
	- جوائز الأفلام والمسابقات الرياضية والجوائز الموسيقية، والأحداث والمناسبات حسب الشهر والسنة.
* **[المفاهيم](ArWikiCats/translations/jsons/keys)**:
	- الأيديولوجيات السياسية، والفترات التاريخية، والمجالات العلمية، والمفاهيم الاقتصادية.
* **[الكيانات والأشياء](ArWikiCats/translations/jsons/population)**:
	- المباني والبنية التحتية والمركبات والأسلحة والكتب والألبومات.
* **[الأنواع](ArWikiCats/translations/jsons/taxonomy)**:
	- الأنواع الحيوانية والنباتية.
* **[الأشخاص](ArWikiCats/translations/jsons/people)**:
	- الشخصيات التي تملك تصنيفات باسمائها مثل أصحاب المناصب الرسمية والفنانون والمخرجون.
---

## 2.4 المحرك المركزي لحل التسمية

المسؤول عن التنظيم:

`main_processers/main_resolve.py`

وظيفته:

* تجربة القواعد حسب الأولوية.
* التوقف عند أول تطابق صحيح.
* ضمان الاتساق بين التصنيفات.

---

## 2.5 تنسيق النتيجة النهائية

يشمل:

* تحسين الصياغة العربية.
* تنسيق العبارات.
* تمرير النتيجة عبر `fixlab`.

---

## 2.6 إضافة بادئة "تصنيف:"

عبر:

`EventProcessor._prefix_label`

---

# 3. المتطلبات والتثبيت

## 3.1 المتطلبات

* Python 3.10 أو أحدث
* مكتبات مثبتة من `requirements.in`

## 3.2 التثبيت

```bash
git clone https://github.com/MrIbrahem/ArWikiCats.git
cd ArWikiCats
pip install -r requirements.in
````

---

# 4. الاستخدام السريع

## 4.1 معالجة تصنيف واحد

```python
from ArWikiCats import resolve_arabic_category_label

label = resolve_arabic_category_label("Category:2015 in Yemen")
print(label)
# تصنيف:2015 في اليمن
```

## 4.2 معالجة قائمة كاملة

```python
from ArWikiCats import EventProcessor

categories = [
    "Category:2015 American television",
    "Category:1999 establishments in Europe",
    "Category:Belgian cyclists",
]

processor = EventProcessor()
result = processor.process(categories)

print(result.labels)
print(result.no_labels)
```

## 4.3 تشغيل الأمثلة

```bash
python examples/run.py
python examples/1k.py
python examples/5k.py
```

---

# 5. إعدادات النظام

يمكن تخصيص سلوك النظام باستخدام:

* `YEMENTEST`
* `STUBS`
* `MAKEERR`
* `LOAD_P17NAT`
* `NOPRINT`

تفاصيل كل متغير موجودة في:

`ArWikiCats/config.py`

---

# 6. توسيع النظام

## 6.1 إضافة ترجمات جديدة

ضع القواميس داخل:

`ArWikiCats/translations/`

مثال:

```python
jobs_mens_data = {
    "footballers": "لاعبو كرة قدم",
    "painters": "رسامون",
}
```

## 6.2 إضافة قواعد جديدة

```python
if not resolved_label:
    resolved_label = new_bot.translate(cate)
```

## 6.3 إضافة بوت جديد

```text
ArWikiCats/make_bots/yourdomain_bot.py
```

مع:

1. دوال المعالجة
2. ربط البوت في resolver
3. إضافة اختبارات

---

# 7. بنية المشروع

```
ArWikiCats/
│
├── main.py
├── event_processing.py
│
├── fix/
│   ├──
├── main_processers/
│   ├── main_resolve.py
│   ├── event2bot.py
│   └── event_lab_bot.py
│
├── make_bots/
│   ├── date_bots/
│   ├── jobs_bots/
│   ├── media_bots/
│   └── format_bots/
│
├── translations/
│   ├── geo/
│   ├── sports/
│   ├── jobs/
│   └── medical/
│
├── translations_formats/
│   ├──
├── translations_resolvers/
│   ├──
├── helps/
├── utils/
tests/
```

---

# 8. الاختبارات

بعد أي تحديث:

```bash
pytest
```

يغطي المشروع أكثر من **13,900 اختبار** تشمل:

* الوظائف الأساسية
* الأنماط الزمنية
* البلدان والجنسيات ومختلف حالات التصنيفات
* الأنماط المعقدة
* الحالات النادرة
* أداء النظام
* مطابقة القواميس

## 8.1 تشغيل جزء معين

```bash
pytest -k "jobs"
pytest tests/test_languages/
```

## 8.2 الاختبارات البطيئة

```bash
pytest -m slow
```

---

# 9. الأداء

* استهلاك الذاكرة: حُسن الاستهلاك مقارنة مقارنة [بالإصدار السابق](https://github.com/MrIbrahem/make2) **2GB إلى 183MB**
* الاختبارات:  **23 ثانية** (باستخدام `pytest`)
* القدرة على معالجة أكثر من **+5,000 تصنيف** في 10 ثوان. [examples/5k.py](examples/5k.py)

تشغيل Scalene:

```bash
python -m scalene run.py
```

---

# 10. ملاحظات للمساهمين

* أي إضافة يجب أن تشمل قاعدة + قاموس + اختبار.
* الالتزام بـ Black وIsort.
* منع إضافة قواعد بلا اختبارات.

---

# 11. القيود الحالية

* بعض التصنيفات النادرة قد تحتاج معالجة يدوية.
* نتائج بعض الأنماط تتوقف على توفر بيانات في القواميس.
* أنماط معقدة جدًا قد تمر إلى `no_labels`.

---

# 12. خارطة الطريق
* تحسين وحدة الرياضة (Sport Formatter v3).
* توسيع تغطية التصنيفات الإعلامية والموسيقية.

---

# 13. الخلاصة

نظام **ArWikiCats** هو نظام مرن، عالي الأداء، قابل للتوسعة، ويدعم عدد كبير جدًا من التصنيفات بسهولة.
يعتمد على:

* قواعد ترجمة متخصصة
* تخزين مؤقت متقدم
* اختبارات صارمة
* تصميم قابل للتطوير

ويعد مناسبًا للبوتات، الأعمال التحريرية، والمشاريع الضخمة في ويكيبيديا العربية.
